const linksURL =
  "https://rosybertacchini.github.io/wdd230/chamber/data/members.json";

async function getMembers() {
  const response = await fetch(linksURL);
  const data = await response.json();

  const goldMembers = filterMembersByMembershipLevel(data, "Gold");
  //console.log(goldMembers);
  displayMembers(goldMembers);
  displayRandomMember(goldMembers);
}

const displayMembers = (goldMembers) => {
    const ol = document.querySelector("#goldMembersList");

  goldMembers.forEach((member) => {
    const a = document.createElement("a");
    a.href = `${member.url}`;
    a.innerHTML = `${member.name}`;
    const li = document.createElement('li');                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
    li.appendChild(a);
    ol.appendChild(li);
  });
};


function displayRandomMember(goldMembers) {
  const randomIndex = Math.floor(Math.random() * goldMembers.length);
  const randomMember = goldMembers[randomIndex];

  const div = document.querySelector("#randomGoldMember");
  div.innerHTML = "Read the successful story of our Member: " + `<a href="${randomMember.url}">${randomMember.name}</a>`;
}


function filterMembersByMembershipLevel(data, membershipLevel) {
  return data.members.filter(
    (member) => member.membershipLevel === membershipLevel
  );
}

getMembers();
